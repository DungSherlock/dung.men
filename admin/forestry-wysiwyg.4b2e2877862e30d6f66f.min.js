(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1357:function(e,t,n){e.exports={title:"RichText-m__title___11IsC",label:"RichText-m__label___2w7wR",error:"RichText-m__error___3Ozwv","fake-link":"RichText-m__fake-link___dSO89","rich-text":"RichText-m__rich-text___3gGMQ",menu:"RichText-m__menu___1Mgw6","menu--left-group":"RichText-m__menu--left-group___39LOH","menu--center-group":"RichText-m__menu--center-group___38fl0","menu--right-group":"RichText-m__menu--right-group___LcAdJ","menu-control":"RichText-m__menu-control___aqp-h",active:"RichText-m__active___1s95M",disabled:"RichText-m__disabled___DMN0m","formatting-dropdown":"RichText-m__formatting-dropdown___1OeP9",top:"RichText-m__top___1EDxp",bottom:"RichText-m__bottom___2H97V","formatting-item":"RichText-m__formatting-item___3bRkO",h1:"RichText-m__h1____hW0b",h2:"RichText-m__h2___98_hb",h3:"RichText-m__h3___2AOdR",h4:"RichText-m__h4___1qezz",h5:"RichText-m__h5___2Sa-n",h6:"RichText-m__h6___2cMvD",blockquote:"RichText-m__blockquote___27fcs","inline-code":"RichText-m__inline-code___1tij6","link-form--container":"RichText-m__link-form--container___2C3ze","link-form":"RichText-m__link-form___1qury","link-form--save":"RichText-m__link-form--save___hrq6c","link-form--delete":"RichText-m__link-form--delete___3DjK8","link-form--arrow-container":"RichText-m__link-form--arrow-container___3I7Zw","link-form--arrow":"RichText-m__link-form--arrow___1lcZr",fullsize:"RichText-m__fullsize___3ElE-"}},1366:function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}n.d(t,"a",(function(){return r}))},1377:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(20),o=function(){function e(e,t){void 0===t&&(t=0),this.onChange=e,this.time=t}return e.prototype.componentDidMount=function(){var e=this,t=r.Observable.create((function(t){return e.callback=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.next.apply(t,e)}}));0!==this.time&&(t=t.auditTime(this.time)),this.changeSubscription=t.subscribe(this.onChange)},e.prototype.componentWillUnmount=function(){this.changeSubscription&&this.changeSubscription.unsubscribe()},e}()},1447:function(e,t,n){e.exports={title:"ImageForm-m__title___1tiOk",label:"ImageForm-m__label___16J5R",error:"ImageForm-m__error___1i1zG","fake-link":"ImageForm-m__fake-link___1aHNW","image-form":"ImageForm-m__image-form___394O0",top:"ImageForm-m__top___10vvX",bottom:"ImageForm-m__bottom___3XjWR","media-library":"ImageForm-m__media-library___11Yyg","open-media-library":"ImageForm-m__open-media-library___2ZuXB","image-url":"ImageForm-m__image-url___3vU7r","image-url-input":"ImageForm-m__image-url-input___2rxYJ","image-url-submit":"ImageForm-m__image-url-submit___1PRkx"}},1448:function(e,t,n){e.exports={title:"CheatSheet-m__title___1qJRF",label:"CheatSheet-m__label___3owhW",error:"CheatSheet-m__error___2AOiP","fake-link":"CheatSheet-m__fake-link___1xzmH","cheatsheet--button":"CheatSheet-m__cheatsheet--button___3E-fd","cheatsheet--panel":"CheatSheet-m__cheatsheet--panel___RYHIB",expanded:"CheatSheet-m__expanded___3-51w","cheatsheet--close-button":"CheatSheet-m__cheatsheet--close-button___JUg6Z","cheatsheet--sub-title":"CheatSheet-m__cheatsheet--sub-title___2r72G","cheatsheet--key":"CheatSheet-m__cheatsheet--key___2oB3Z","cheatsheet--list":"CheatSheet-m__cheatsheet--list___23Hdm","cheatsheet--list-item":"CheatSheet-m__cheatsheet--list-item___2mXgM","cheatsheet--function":"CheatSheet-m__cheatsheet--function___2Bn-Z","cheatsheet--function--link":"CheatSheet-m__cheatsheet--function--link___c-mYG","cheatsheet--function--h1":"CheatSheet-m__cheatsheet--function--h1___1Dfgr","cheatsheet--function--h2":"CheatSheet-m__cheatsheet--function--h2___tRxVz","cheatsheet--function--h3":"CheatSheet-m__cheatsheet--function--h3___2W4MI","cheatsheet--function--h4":"CheatSheet-m__cheatsheet--function--h4___3wvaO","cheatsheet--function--h5":"CheatSheet-m__cheatsheet--function--h5___3xM--","cheatsheet--function--h6":"CheatSheet-m__cheatsheet--function--h6___3hy98"}},1449:function(e,t,n){e.exports={title:"ImageNodeView-m__title___1tQfh",label:"ImageNodeView-m__label___223BV",error:"ImageNodeView-m__error___3BUdR","fake-link":"ImageNodeView-m__fake-link___3e7vo","image-wrapper":"ImageNodeView-m__image-wrapper___tBeBt","media-controls":"ImageNodeView-m__media-controls___2uYts","media-controls--top":"ImageNodeView-m__media-controls--top___3WeUs","media-controls--bottom":"ImageNodeView-m__media-controls--bottom___1NJNV",input:"ImageNodeView-m__input___3e_Lz","alignment-group":"ImageNodeView-m__alignment-group___MNfJd","media-controls--icon":"ImageNodeView-m__media-controls--icon___ApMe-",active:"ImageNodeView-m__active___2QPp2",disabled:"ImageNodeView-m__disabled___1eeXK"}},1596:function(e,t,n){"use strict";n.r(t);n(645);var r=n(0),o=n(1),i=n(37),a=n(442),s=n(14),c=n(1439),l=n(417),u=n(1377),h=n(1366),p=n(1357),d={inline:!0,attrs:{src:{},align:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}},group:"inline",draggable:!0,allowGapCursor:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt"),align:m(e),width:e.getAttribute("width"),height:e.getAttribute("height")}}}],toDOM:function(e){var t={src:e.attrs.src};return e.attrs.title&&(t.title=e.attrs.title),e.attrs.alt&&(t.alt=e.attrs.alt),e.attrs.width&&(t.width=e.attrs.width),e.attrs.height&&(t.height=e.attrs.height),e.attrs.align&&(t.class="align-"+e.attrs.align),["img",t]}},f=/align-([a-z]*)/;function m(e){var t=e.getAttribute("class")||"",n=f.exec(t);return n&&n.length>1?n[1]:null}var g={content:"block+"},v=n(1441),_=function(){return(_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},b=Object(v.tableNodes)({tableGroup:"block",cellContent:"inline*",cellAttributes:{}});b.table_cell=_({},b.table_cell,{marks:"_",attrs:_({},b.table_cell.attrs,{align:{default:null}})}),b.table_header=_({},b.table_header,{marks:"_",attrs:_({},b.table_header.attrs,{align:{default:null}})});var k=function(){return(k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function w(e,t){void 0===t&&(t={});var n={text:j.text,hard_break:j.hard_break};return t.image&&(n.image=j.image),e?(n.doc=g,n.paragraph=j.paragraph,t.code_block&&(n.code_block=j.code_block),t.blockquote&&(n.blockquote=j.blockquote),t.horizontal_rule&&(n.horizontal_rule=j.horizontal_rule),t.heading&&(n.heading=j.heading),t.table&&(n.table=j.table,n.table_row=j.table_row,n.table_header=j.table_header,n.table_cell=j.table_cell)):n.doc=S,n}function E(e){var t={};for(var n in e)e[n]&&(t["forestry-"+n]=e[n]);return t}function O(e){var t={};for(var n in e)e[n]&&(t[n]=e[n]);return t}function C(e){return function(t){return k({},e,x(t))}}function x(e){for(var t={},n=e.attributes,r=0;r<n.length;r++){var o=n[r];if(o.value)t[o.name.startsWith("forestry-")?o.name.slice(9):o.name]=o.value}return t}var S={content:"inline*",marks:"_"},A={content:"inline*",marks:"_",attrs:{class:{default:""},id:{default:""}},group:"block",parseDOM:[{tag:"p",getAttrs:x}],toDocument:function(e){return["p",O(e.attrs),0]},toDOM:function(e){return["p",E(e.attrs),0]}},M={attrs:{level:{default:1},class:{default:""},id:{default:""}},content:"inline*",marks:"_",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:C({level:1})},{tag:"h2",getAttrs:C({level:2})},{tag:"h3",getAttrs:C({level:3})},{tag:"h4",getAttrs:C({level:4})},{tag:"h5",getAttrs:C({level:5})},{tag:"h6",getAttrs:C({level:6})}],toDocument:function(e){var t=e.attrs;return["h"+t.level,O(y(t,["level"])),0]},toDOM:function(e){var t=e.attrs;return["h"+t.level,E(y(t,["level"])),0]}},j=k({doc:g,paragraph:A,blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",allowGapCursor:!0,parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},heading:M,image:d,code_block:{content:"text*",attrs:{params:{default:""}},group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},text:{group:"inline"},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1,tight:e.hasAttribute("data-tight")}}}],toDOM:function(e){return["ol",{start:1==e.attrs.order?null:e.attrs.order,"data-tight":e.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:function(e){return{tight:e.hasAttribute("data-tight")}}}],toDOM:function(e){return["ul",{"data-tight":e.attrs.tight?"true":null},0]}},list_item:{content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}}},b),N=n(1350),T=n(16),I=n(243),P=function(){return(P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},L=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function R(e){void 0===e&&(e={});var t={};return e.code&&(t.code=D.code),e.link&&(t.link=D.link),e.strong&&(t.strong=D.strong),e.em&&(t.em=D.em),e.underline&&(t.underline=D.underline),e.custom&&(t.custom=D.custom),e.s&&(t.s=D.s),t}var D={link:{attrs:{href:{},title:{default:null},editing:{default:null},creating:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href"),title:e.getAttribute("title"),editing:e.getAttribute("editing"),creating:e.getAttribute("creating")}}}],toDOM:function(e){var t=P({},e.attrs);return t.href&&t.href.startsWith("/")&&Object(I.b)(t.href)&&(t.href=T.a.media.getBodyServeUrl(t.href)),["a",t]},toDocument:function(e){var t=e.attrs;t.editing,t.creating;return["a",L(t,["editing","creating"])]}},custom:{attrs:{class:{}},parseDOM:[{tag:"span[class]",getAttrs:function(e){return{class:e.getAttribute("class")}}}],toDOM:function(e){return["span",e.attrs]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:function(e){return"italic"==e&&null}}],toDOM:function(){return["em"]}},s:{parseDOM:[{tag:"del"}],toDOM:function(){return["del"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!=e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong"]}},underline:{parseDOM:[{style:"text-decoration",getAttrs:function(e){return/^underline;?$/i.test(e)&&null}}],toDOM:function(e){return["span",P({},e.attrs,{style:"text-decoration: underline;"})]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code"]}}},z=new N.Schema({nodes:w(!1,{code_block:!1,blockquote:!1,horizontal_rule:!1,heading:!1,image:!0,table:!1}),marks:R({code:!0,link:!0,strong:!0,em:!0,underline:!0,custom:!0,s:!0})}),B=new N.Schema({nodes:j,marks:R({code:!0,link:!0,strong:!0,em:!0,s:!0})}),F=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};var V,W=n(1349),$=n(1443),q=n(1444),U=n(1367),H=n(67),K=n(12),G=n(1364),J=(V=function(e,t){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}V(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Z=i.bind(p);function Q(e){var t,n=e.mark,o=e.icon,i=e.tooltip,a=e.size,s=e.stroke,c=e.defaultAttrs,l=e.selectionOnly,u=void 0!==l&&l,h=e.noMix,p=void 0===h?[]:h;return(t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.markIsActive=function(e){var n=t.props.view.state,r=t.markType(e),o=n.selection,i=o.from,a=o.$from,s=o.to;return o.empty?!!r.isInSet(n.storedMarks||a.marks()):n.doc.rangeHasMark(i,s,r)},t.onClick=function(){if(!t.disabled){var e=t.props.view,r=e.state,o=e.dispatch;r.selection.$cursor&&u||(Object(G.toggleMark)(t.markType(n),c)(r,o),t.props.view.focus())}},t}return J(t,e),t.prototype.markType=function(e){return this.props.view.state.schema.marks[e]},Object.defineProperty(t.prototype,"active",{get:function(){return this.markIsActive(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return u?!!this.props.view.state.selection.$cursor||this.inCodeBlock||this.incompatibleMarksAreActive:this.inCodeBlock||this.incompatibleMarksAreActive},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inCodeBlock",{get:function(){var e=this.props.view;return e.state.selection.$from.node(e.state.selection.$from.depth).type===e.state.schema.nodes.code_block},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"incompatibleMarksAreActive",{get:function(){return p.map(this.markIsActive).reduce((function(e,t){return t||e}),!1)},enumerable:!0,configurable:!0}),t.prototype.render=function(){return this.markType(n)?r.createElement("div",{"data-tooltip":i,"data-side":"top"},r.createElement("div",{className:Z("menu-control",{active:this.active,disabled:this.disabled}),onClick:this.onClick},r.createElement(K.Icon,{name:o,width:a,height:a,stroke:s}))):null},t}(r.Component)).displayName=n+"Control",t}var X=n(3),Y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ee=i.bind(p);function te(e){var t=e.className,n=e.children,o=e.command,i=e.typeName,a=e.attrs;return(function(e){function s(){var t=null!==e&&e.apply(this,arguments)||this;return t.canDo=function(){return o(t.props.view.state)},t.onClick=function(){o(t.props.view.state,t.props.view.dispatch),t.props.view.focus(),t.props.onClick()},t}return Y(s,e),Object.defineProperty(s.prototype,"active",{get:function(){if(!i)return!1;var e=this.props.view.state.selection.$from,t=e.node(e.depth),n=t.type.name===i,r=!a||t.attrs.level===a.level;return n&&r},enumerable:!0,configurable:!0}),s.prototype.render=function(){return r.createElement("li",{className:ee("formatting-item",{disabled:!this.canDo(),active:this.active},t),onClick:this.onClick},n)},s}(r.Component))}function ne(e,t){var n=e.selection.$cursor;if(!n)return!1;var r=e.doc.nodeAt(Math.max(n.pos-1,0));return!!r&&(r.type==e.schema.nodes.heading&&(!r.textContent.length&&(t&&t(e.tr.replaceRangeWith(n.pos-1,n.pos+r.nodeSize-1,e.schema.nodes.paragraph.create()).setSelection(W.Selection.near(e.doc.resolve(n.pos-1)))),!0)))}function re(e,t,n,r){return function(o,i){var a=o.selection,s=a.from,c=a.to,l=null,u=-1;if(o.doc.nodesBetween(s,c,(function(e,t){if(l)return!1;e.isTextblock&&(l=e,u=t)})),!l||u<0)return!1;var h=o.doc.resolve(u),p=h.index(),d=o.selection.$head.parent.attrs.level==t.level,f=d?n:e,m=d?r:t;return!!h.parent.canReplaceWith(p,p+1,f)&&(i&&i(o.tr.setBlockType(s,c,f,m).scrollIntoView()),!0)}}var oe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ie=i.bind(p),ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={active:!1},t.toggle=function(){return t.setState((function(e){return{active:!e.active}}))},t.blockQuote=function(){return Object(G.wrapIn)(t.props.view.state.schema.nodes.blockquote)(t.props.view.state,t.props.view.dispatch)},t.lift=function(){return Object(G.lift)(t.props.view.state,t.props.view.dispatch)},t}return oe(t,e),t.prototype.render=function(){var e=this.props,t=e.bottom,n=e.view,o=this.state.active;return r.createElement("div",{className:ie("headings-toggle","menu-control"),onClick:this.toggle},r.createElement("span",null,t?r.createElement(K.Icon,{name:"HeadingsDown",width:14,height:14}):r.createElement(K.Icon,{name:"HeadingsUp",width:14,height:14})),r.createElement(X.Dismissible,{onDismiss:this.toggle,active:o,escape:!0},r.createElement("ul",{className:ie("formatting-dropdown",{top:!t,bottom:t,active:o})},r.createElement(ce,{view:n,onClick:this.toggle}),r.createElement(le,{view:n,onClick:this.toggle}),r.createElement(ue,{view:n,onClick:this.toggle}),r.createElement(he,{view:n,onClick:this.toggle}),r.createElement(pe,{view:n,onClick:this.toggle}),r.createElement(de,{view:n,onClick:this.toggle}))))},t}(r.Component);function se(e){return function(t,n){return re(t.schema.nodes.heading,{level:e},t.schema.nodes.paragraph,null)(t,n)}}var ce=te({className:"h1",children:"Heading 1",command:se(1),typeName:"heading",attrs:{level:1}}),le=te({className:"h2",children:"Heading 2",command:se(2),typeName:"heading",attrs:{level:2}}),ue=te({className:"h3",children:"Heading 3",command:se(3),typeName:"heading",attrs:{level:3}}),he=te({className:"h4",children:"Heading 4",command:se(4),typeName:"heading",attrs:{level:4}}),pe=te({className:"h5",children:"Heading 5",command:se(5),typeName:"heading",attrs:{level:5}}),de=te({className:"h6",children:"Heading 6",command:se(6),typeName:"heading",attrs:{level:6}}),fe=n(1401);function me(e,t){var n=Object(fe.liftListItem)(e.schema.nodes.list_item);return Object(fe.wrapInList)(e.schema.nodes.bullet_list)(e,t)||n(e,t)}function ge(e,t){var n=Object(fe.liftListItem)(e.schema.nodes.list_item);return Object(fe.wrapInList)(e.schema.nodes.ordered_list)(e,t)||n(e,t)}var ve=n(2);var _e,be,ke=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ye=i.bind(p),we=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){t.props.command(t.props.view.state,t.props.view.dispatch),t.props.view.focus(),t.props.onClick()},t}return ke(t,e),t.prototype.render=function(){var e=this.props.children;return r.createElement("li",{className:ye("formatting-item","h5"),onClick:this.onClick},e)},t}(r.Component),Ee=n(414),Oe=Object(r.createContext)(null),Ce=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},xe=function(){return(xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Se=i.bind(p),Ae=ve.default.li(_e||(_e=Ce(["\n  font-size: 0.8rem;\n  display: block;\n  white-space: nowrap;\n  border-bottom: 1px solid #f3f3f3;\n  padding: 0.5rem 1rem;\n  cursor: initial;\n"],["\n  font-size: 0.8rem;\n  display: block;\n  white-space: nowrap;\n  border-bottom: 1px solid #f3f3f3;\n  padding: 0.5rem 1rem;\n  cursor: initial;\n"]))),Me=Object(ve.default)((function(e){return r.createElement("a",xe({href:"https://forestry.io/docs/settings/snippets/",target:"_blank","data-tooltip":"What's a snippet?"},e),r.createElement(K.Icon,{name:"InfoCircle",width:12,height:12}))}))(be||(be=Ce(["\n  margin-left: 10px;\n"],["\n  margin-left: 10px;\n"])));function je(e,t,n){return function(r,o){return t(),function(e,t,n,r){if(t){var o=e.schema.text(n);if(r){var i=r.nodeFromString(n||"");if(!(n===i.textContent))return t(e.tr.replaceSelectionWith(i,!1)),!0}t(e.tr.replaceSelectionWith(o,!1))}return!0}(r,o,e,n)}}var Ne=n(7),Te=n(183),Ie=n(21),Pe=Object(Ne.b)((function(e,t){var n=e.snippets.data.filter((function(e){return!e.file.includes("/")}));if(e.currentPage&&e.currentPage.data){var r=Object(Ie.f)(e,e.currentPage.data.section),o=e.snippets.data.filter((function(e){return e.file.startsWith(r.path)}));if(o.length)return{snippets:o}}return{snippets:n}}),(function(e){return{onInsertSnippet:function(){e(Object(Te.b)())}}}))((function(e){var t,n,o,i=Object(Ee.a)(),a=i[0],s=i[1],c=Object(r.useContext)(Oe),l=(t=[],n=e.view,o=e.onInsertSnippet,e.snippets.forEach((function(e){t.push(r.createElement(we,{view:n,onClick:s,children:e.name,command:je(e.contents,o,c)}))})),t),u=e.bottom;return r.createElement("div",{className:Se("menu-control"),"data-tooltip":"Add Snippet",onClick:s},r.createElement("span",null,r.createElement(K.Icon,{name:"CodeBlock",width:16,height:16})),r.createElement(X.Dismissible,{onDismiss:s,active:a,escape:!0},r.createElement("ul",{className:Se("formatting-dropdown",{top:!u,bottom:u,active:a})},l.length?l:r.createElement(Ae,null,"No Snippets Defined",r.createElement(Me,null)))))})),Le=n(1400);function Re(e,t){var n=function(e){var t,n,r,o,i=e.split(/-(?!$)/),a=i[i.length-1];"Space"==a&&(a=" ");for(var s=0;s<i.length-1;s++){var c=i[s];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);De?o=!0:n=!0}}t&&(a="Alt-"+a);n&&(a="Ctrl-"+a);o&&(a="Meta-"+a);r&&(a="Shift-"+a);return a}(e);return function(e){var r=Le(e),o=1==r.length&&" "!=r,i=ze(r,e,!o),a=ze(r,e,!0),s=e.shiftKey||e.altKey||e.metaKey,c=Le.base[e.keyCode];i===n?t(e):o&&s&&c!=r&&a===n&&t(e)}}var De="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function ze(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}var Be=function(){return(Be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Fe(e,t,n){var r=e.schema.nodes.image.createAndFill({src:n,alt:"",title:""});return t&&t(e.tr.replaceSelectionWith(r)),!0}function Ve(e,t,n,r){var o=e.doc.nodeAt(n);if(!o||o.type!==e.schema.nodes.image)return!1;var i=Be({},o.attrs,{align:o.attrs.align===r?null:r});return t&&t(e.tr.setNodeMarkup(n,o.type,i,o.marks)),!0}function We(e,t,n){var r=n,o=r+1,i=e.doc.nodeAt(r);return!(!i||i.type!=e.schema.nodes.image)&&(t&&t(e.tr.delete(r,o)),!0)}var $e=function(){return($e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function qe(e,t,n){var r=(n=n||"").split("/"),o={title:decodeURI(r[r.length-1])||"Download File",href:n,editing:"",creating:""},i=e.schema,a=i.text(o.title,[i.marks.link.create(o)]);return t(e.tr.replaceSelectionWith(a,!1)),!0}function Ue(e,t){var n=e.schema.marks.link,r=e.selection.$cursor,o=e.tr;if(!r)return!1;var i=e.doc.nodeAt(r.pos);if(!i||!n.isInSet(i.marks))return!1;if(t){var a=function(e,t){window.$cursor=e;var n=e.index(),r=e.indexAfter();n===e.parent.childCount&&(n--,r--);var o=t.isInSet(e.parent.child(n).marks),i=function(t){return o.isInSet(e.parent.child(t).marks)};for(;n>0&&i(n-1);)n--;for(;r<e.parent.childCount&&i(r);)r++;for(var a=e.start(),s=a,c=0;c<r;c++){var l=e.parent.child(c).nodeSize;c<n&&(a+=l),s+=l}return{from:a,to:s,mark:o}}(r,n),s=a.from,c=a.to,l=a.mark,u=$e({},l?l.attrs:{},{editing:"editing",creating:""});o.addMark(s,c,n.create(u)),t(o.scrollIntoView())}return!0}function He(e,t){var n=[],r=e.schema.marks.link;if(e.doc.descendants((function(e,t){var o=r.isInSet(e.marks);if(o&&"editing"==o.attrs.editing){var i=$e({},o.attrs,{editing:"",creating:""});n.push({from:t,to:t+e.nodeSize,mark:r.create(i)})}})),!n.length)return!1;if(t){var o=e.tr;n.forEach((function(e){var t=e.from,n=e.to,r=e.mark;return o.addMark(t,n,r)})),t(o)}return!0}function Ke(e,t){var n=e.schema.nodes.horizontal_rule;return t&&t(e.tr.replaceSelectionWith(n.create()).scrollIntoView()),!0}var Ge=n(42),Je=n(108),Ze=n(114),Qe=n(93),Xe=n(1447),Ye=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),et=i.bind(Xe),tt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={value:""},t.onChange=function(e){var n=Object(Ze.a)(e);t.setState((function(){return{value:n}}))},t.insert=function(){var e=t.state.value;t.props.fromUrl(e)},t}return Ye(t,e),t.prototype.render=function(){var e=this.props,t=e.top,n=e.bottom;return r.createElement("div",{className:et("image-form",{top:t,bottom:n})},r.createElement("div",{className:et("media-library"),onClick:this.props.fromLibrary},r.createElement("span",{className:et("label")},"Media Library"),r.createElement(Qe.b,{primary:!0,small:!0,className:et("open-media-library")},"Open")),r.createElement("div",{className:et("image-url")},r.createElement("span",{className:et("label")},"Insert from URL"),r.createElement("div",{className:et("image-url-input")},r.createElement(Je.b,{placeholder:"Enter image URL",input:{type:"text",autoFocus:!0,value:this.state.value,onChange:this.onChange}}),r.createElement("span",{className:et("image-url-submit"),onClick:this.insert},"Insert"))))},t}(r.Component),nt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rt=i.bind(p),ot=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node="image",t.icon="Image",t.title="Insert Image",t.state={visible:!1},t.handleKeyPress=Re("Ctrl-Shift-U",(function(){t.props.view.hasFocus()&&t.canInsert&&t.popModal()})),t.insertMedia=function(e){Object(I.a)(e)?Fe(t.props.view.state,t.props.view.dispatch,e):qe(t.props.view.state,t.props.view.dispatch,e),t.props.view.focus(),t.setState((function(){return{visible:!1}})),t.props.view.focus()},t.popModal=function(){t.setState((function(){return{visible:!1}})),t.props.showMediaManager({multiselect:!1,onChoose:function(e){var n=e[0];n&&t.insertMedia(n.servedFrom)}})},t.toggleVisibility=function(){t.canInsert&&t.setState((function(e){return{visible:!e.visible}}))},t.ignore=function(e){return e.stopPropagation()},t}return nt(t,e),t.prototype.componentDidMount=function(){document.addEventListener("keypress",this.handleKeyPress)},t.prototype.componentWillUnmount=function(){document.removeEventListener("keypress",this.handleKeyPress)},Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.props.view.state.schema.nodes[this.node]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canInsert",{get:function(){for(var e=this.props.view.state,t=this.nodeType,n=e.selection.$from,r=n.depth;r>=0;r--){var o=n.index(r);if(n.node(r).canReplaceWith(o,o,t))return!0}return!1},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.props.bottom;return r.createElement("div",{"data-tooltip":"Insert image"},r.createElement("div",{onClick:this.toggleVisibility,className:rt("menu-control",{disabled:!this.canInsert})},r.createElement("div",null,r.createElement(K.Icon,{name:this.icon,width:14,height:14,stroke:2})),r.createElement("div",{style:{width:0,height:0},onClick:this.ignore},r.createElement(X.Dismissible,{active:this.state.visible,onDismiss:this.toggleVisibility,escape:!0},this.state.visible&&r.createElement(tt,{fromUrl:this.insertMedia,fromLibrary:this.popModal,top:!e,bottom:e})))))},t}(r.Component),it=Object(Ne.b)(null,{showMediaManager:Ge.e},null,{pure:!1})(ot),at=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),st=i.bind(p),ct=Q({mark:"strong",icon:"Bold",tooltip:"Bold",size:12,stroke:3}),lt=Q({mark:"em",icon:"Italic",tooltip:"Italic",size:12,stroke:2}),ut=Q({mark:"underline",icon:"Underline",tooltip:"Underline",size:12,stroke:2}),ht=Q({mark:"link",icon:"Link",tooltip:"Link",size:14,stroke:2,selectionOnly:!0,defaultAttrs:{href:"",title:"",editing:"editing",creating:"creating"},noMix:["code"]}),pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),t.prototype.render=function(){var e=this.props,t=e.view,n=e.bottom,o=void 0!==n&&n,i=e.format,a="html"!=i,s="simple-markdown"===i;return r.createElement("div",{className:st("menu")},r.createElement("div",{className:st("menu--left-group")},r.createElement(vt,{view:t}),r.createElement(gt,{view:t})),r.createElement("div",{className:st("menu--center-group")},!s&&a&&r.createElement(ae,{view:t,bottom:o}),!s&&r.createElement(Pe,{view:t,bottom:o}),r.createElement(ct,{view:t}),r.createElement(lt,{view:t}),r.createElement(ut,{view:t}),r.createElement(ht,{view:t}),!s&&r.createElement(it,{view:t,bottom:o}),!s&&a&&r.createElement(ft,{view:t,bottom:o}),!s&&a&&r.createElement(mt,{view:t,bottom:o}),!s&&a&&r.createElement(_t,{view:t,bottom:o}),!s&&a&&r.createElement(bt,{view:t,bottom:o})),r.createElement("div",{className:st("menu--right-group")}))},t}(r.Component),dt=function(e,t,n,o,i,a,s){return void 0===s&&(s=!0),function(n){function c(){var t=null!==n&&n.apply(this,arguments)||this;return t.onClick=function(){if(t.canDo()){var n=t.props.view;e(n.state,n.dispatch),s&&n.focus()}},t.canDo=function(){return e(t.props.view.state)},t}return at(c,n),c.prototype.render=function(){return r.createElement("div",{"data-tooltip":o},r.createElement("div",{className:st("menu-control",{disabled:!this.canDo(),bottom:this.props.bottom}),onClick:this.onClick},r.createElement(K.Icon,{name:t,width:i,height:i,stroke:a})))},c}(r.Component)};var ft=dt((function(e,t){return Object(G.wrapIn)(e.schema.nodes.blockquote)(e,t)}),"Quote",0,"Blockquote",14,2),mt=dt((function(e,t){return Object(G.setBlockType)(e.schema.nodes.code_block)(e,t)}),"Code",0,"Codeblock",14,2,!1),gt=dt(U.redo,"Redo",0,"Redo",14,2),vt=dt(U.undo,"Undo",0,"Undo",14,2),_t=dt(me,"UnorderedList",0,"Unordered List",16,2),bt=dt(ge,"OrderedList",0,"Ordered List",16,2),kt=n(18),yt=function(){function e(e,t,n,r,o){void 0===o&&(o="html"),this.view=e,this.store=t,this.translator=n,this.bottom=r,this.format=o,this.dom=document.createElement("div"),this.render()}return e.prototype.render=function(){Object(H.render)(r.createElement(Oe.Provider,{value:this.translator},r.createElement(kt.a.Provider,{value:this.store},r.createElement(Ne.a,{store:this.store},r.createElement(pt,{view:this.view,bottom:this.bottom,format:this.format})))),this.dom)},e.prototype.update=function(){this.render()},e.prototype.destroy=function(){Object(H.unmountComponentAtNode)(this.dom),this.dom.remove()},e}();function wt(e,t,n,r){return void 0===r&&(r="html"),new W.Plugin({view:function(o){var i=new yt(o,e,t,n,r),a=o.dom.parentNode;return a.parentElement.insertBefore(i.dom,a),i}})}var Et=n(1378),Ot=n(1355);function Ct(e,t){var n=xt(e,e.schema.nodes.blockquote);if(!n)return!1;var r=Object(Ot.liftTarget)(n);return!!r&&(t&&t(e.tr.lift(n,r)),!0)}var xt=function(e,t){var n=e.selection,r=n.$from,o=n.$to;return r.blockRange(o,(function(e){return e.type==t}))},St=function(){return(St=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},At=n(1367),Mt=At.undo,jt=At.redo,Nt=n(1379).undoInputRule,Tt="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function It(e){return function(t,n,r){if(t.selection.empty&&r.endOfTextblock(e)){var o="left"==e||"up"==e?-1:1,i=t.selection.$head,a=W.Selection.near(t.doc.resolve(o>0?i.after():i.before()),o);if(a.$head&&"code_block"==a.$head.parent.type.name)return n(t.tr.setSelection(a)),!0}return!1}}function Pt(e,t){return Object(Et.keymap)(function(e,t){var n,r=St({},G.baseKeymap,{Enter:Object(G.chainCommands)(G.createParagraphNear,G.liftEmptyBlock,G.splitBlock)});function o(e,t){r[e]&&(t=Object(G.chainCommands)(t,r[e])),r[e]=t}if(o("Mod-z",Mt),o("Backspace",Nt),o("Shift-Mod-z",jt),Tt||o("Mod-y",jt),o("Tab",(function(){return!0})),o("Shift-Tab",(function(){return!0})),(n=e.marks.strong)&&o("Mod-b",Object(G.toggleMark)(n)),(n=e.marks.em)&&o("Mod-i",Object(G.toggleMark)(n)),n=e.marks.link){var i=Object(G.toggleMark)(n,{href:"",title:"",creating:"creating",editing:"editing"});o("Mod-k",(function(e,t){return!e.selection.$cursor&&i(e,t)}))}if((n=e.marks.underline)&&o("Mod-u",Object(G.toggleMark)(n)),n=e.nodes.hard_break){var a=n,s=Object(G.chainCommands)(G.exitCode,(function(e,t){return t(e.tr.replaceSelectionWith(a.create()).scrollIntoView()),!0}));e.nodes.paragraph||o("Enter",s),o("Mod-Enter",s),o("Shift-Enter",s),Tt&&o("Ctrl-Enter",s)}return(n=e.nodes.heading)&&(o("Mod-Alt-1",re(n,{level:1},e.nodes.paragraph,null)),o("Mod-Alt-2",re(n,{level:2},e.nodes.paragraph,null)),o("Mod-Alt-3",re(n,{level:3},e.nodes.paragraph,null)),o("Mod-Alt-4",re(n,{level:4},e.nodes.paragraph,null)),o("Mod-Alt-5",re(n,{level:5},e.nodes.paragraph,null)),o("Mod-Alt-6",re(n,{level:6},e.nodes.paragraph,null)),o("Backspace",ne)),(n=e.nodes.ordered_list)&&o("Mod-Alt-7",ge),(n=e.nodes.bullet_list)&&o("Mod-Alt-8",me),((n=e.nodes.bullet_list)||(n=e.nodes.ordered_list))&&o("Mod-Alt-9",Object(fe.liftListItem)(e.nodes.list_item)),(n=e.nodes.code_block)&&(o("Mod-Alt-0",Object(G.setBlockType)(n)),o("ArrowLeft",It("left")),o("ArrowRight",It("right")),o("ArrowUp",It("up")),o("ArrowDown",It("down"))),(n=e.marks.code)&&o("Mod-0",Object(G.toggleMark)(n)),(n=e.nodes.blockquote)&&(o("Mod->",Object(G.wrapIn)(n)),o("Mod-<",Ct)),(n=e.nodes.paragraph)&&(o("Mod-Alt-9",Object(G.setBlockType)(n)),o("Shift-Ctrl-0",Object(G.setBlockType)(n))),(n=e.nodes.horizontal_rule)&&o("Mod-Enter",Ke),(n=e.nodes.list_item)&&(o("Enter",Object(fe.splitListItem)(n)),o("Tab",Object(fe.sinkListItem)(n)),o("Shift-Tab",Object(fe.liftListItem)(n))),r}(e))}var Lt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rt=function(){return(Rt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Dt=i.bind(p),zt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={href:Object(I.b)(t.props.href||"")?T.a.media.getBodyRelativePath(t.props.href||""):t.props.href||"",title:t.props.title||""},t.setHref=function(e){var n=e.target.value;return t.setState((function(){return{href:n}}))},t.setTitle=function(e){var n=e.target.value;return t.setState((function(){return{title:n}}))},t.save=function(){return t.props.onChange(t.state)},t.onEnterSave=function(e){"Enter"===e.key&&t.save()},t.onEscapeCancel=function(e){27===e.keyCode&&t.props.cancel()},t}return Lt(t,e),t.prototype.componentDidMount=function(){document.addEventListener("keydown",this.onEscapeCancel)},t.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.onEscapeCancel)},t.prototype.componentWillReceiveProps=function(e){var t=e.href,n=e.title;this.setState((function(){return{href:t,title:n}}))},t.prototype.render=function(){var e=this.props,t=e.removeLink,n=e.style,o=void 0===n?{}:n,i=this.state,a=i.href,s=i.title;return r.createElement("div",{style:Rt({position:"relative",height:"max-content"},o),className:Dt("link-form")},r.createElement("label",null,"Title"),r.createElement(Je.b,{placeholder:"Enter Title",autoFocus:!0,input:{type:"text",value:s,onChange:this.setTitle,onKeyPress:this.onEnterSave}}),r.createElement("label",null,"URL"),r.createElement(Je.b,{placeholder:"Enter URL",autoFocus:!0,input:{type:"text",value:a,onChange:this.setHref,onKeyPress:this.onEnterSave}}),r.createElement("div",{className:Dt("button-group")},r.createElement(Qe.b,{primary:!0,small:!0,onClick:this.save,className:Dt("link-form--save")},"Save"),r.createElement(Qe.b,{secondary:!0,small:!0,onClick:t,className:Dt("link-form--delete")},r.createElement(K.Icon,{name:"GarbageCan",width:14,height:14}))))},t}(r.Component),Bt=function(){return(Bt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ft=i.bind(p),Vt=function(){function e(e,t){var n=this;this.renderTarget=e,this.view=t,this.clickTarget=null,this.render=function(e){n.clickTarget=e,Object(H.render)(n.component(),n.renderTarget)},this.unmount=function(){return Object(H.unmountComponentAtNode)(n.renderTarget)},this.cancel=function(){return He(n.view.state,n.view.dispatch)},this.removeLink=function(){return function(e,t){if(t){var n=e.schema.marks.link,r=e.tr;e.doc.descendants((function(e,t){var o=n.isInSet(e.marks);if(o&&o.attrs.editing){var i=t,a=i+e.nodeSize;r.removeMark(i,a,o)}})),t(r.scrollIntoView())}return!0}(n.view.state,n.view.dispatch)},this.onChange=function(e){!function(e,t,n){if(t){var r=e.schema.marks.link,o=e.tr;e.doc.descendants((function(e,t){var i=r.isInSet(e.marks);if(i&&i.attrs.editing){var a=t,s=a+e.nodeSize;o.addMark(a,s,r.create(n))}})),t(o.scrollIntoView())}}(n.view.state,n.view.dispatch,Bt({},e,{editing:"",creating:""}))}}return e.prototype.component=function(){var e,t,n,o,i,a,s=function(e,t,n){var r=e.offsetWidth,o=e.offsetLeft,i=t.parentElement.offsetWidth,a=t.offsetLeft,s=o-a+r/2-n/2;if(s<-a)return"-1rem";if(s+n>i)return"calc("+(s-(s+n-i))+"px + 1rem)";return s+"px"}(this.clickTarget,this.renderTarget,200),c="calc(2rem + "+(this.clickTarget.offsetTop-this.renderTarget.offsetTop)+"px)";return r.createElement("div",{className:Ft("link-form--container")},r.createElement("div",{className:Ft("link-form--arrow-container"),style:{left:(e=this.clickTarget,t=this.renderTarget,200,n=e.offsetWidth,o=e.offsetLeft,i=t.offsetLeft,a=o-i+n/2,a+"px"),top:c}},r.createElement("div",{className:Ft("link-form--arrow"),style:{width:"14px",height:"14px"}})),r.createElement(zt,{style:{left:s,top:c,minWidth:"200px"},removeLink:this.removeLink,onChange:this.onChange,href:this.href,title:this.title,cancel:this.cancel}))},Object.defineProperty(e.prototype,"href",{get:function(){return this.clickTarget.getAttribute("href")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.clickTarget.getAttribute("title")},enumerable:!0,configurable:!0}),e}();var Wt=function(){function e(e,t,n){var r=this;this.view=e,this.schema=t,this.renderTarget=n,this.visible=!1,this.linkBeingEdited=null,this.skippedLinkControlClick=!1,this.destroy=function(){document.removeEventListener("click",r.handleClick),window.removeEventListener("resize",r.unmountLinkForm),r.renderTarget.parentElement.removeChild(r.renderTarget)},this.handleClick=function(e){var t=e.target,n=r.view.dom.contains(t),o=r.isValidLink(t);r.shouldStopEditing(t)&&He(r.view.state,r.view.dispatch),n&&o&&(e.preventDefault(),e.stopPropagation(),e.metaKey?window.open(o.getAttribute("href"),"_blank"):Ue(r.view.state,r.view.dispatch))},this.unmountLinkForm=function(){r.visible=!1,function(e){var t=e.state.tr;t.setMeta("type","forestry/unmount"),e.dispatch(t)}(r.view)},document.addEventListener("click",this.handleClick),window.addEventListener("resize",this.unmountLinkForm)}return e.prototype.shouldStopEditing=function(e){var t=this.renderTarget.contains(e),n=this.linkBeingEdited&&"creating"===this.linkBeingEdited.getAttribute("creating"),r=n&&!this.skippedLinkControlClick;return this.skippedLinkControlClick=!!n,this.visible&&!t&&!r},e.prototype.isValidLink=function(e){for(var t,n=e;!t&&n;)"a"===n.tagName.toLowerCase()?t=n:n=n.parentElement;var r=this.view.state.selection.$cursor;return t&&r?t:null},e.prototype.update=function(e){this.view=e,this.linkBeingEdited=this.view.dom.querySelector("a[editing='editing']"),!this.linkBeingEdited&&this.visible&&this.unmountLinkForm(),this.linkBeingEdited&&!this.visible&&this.renderLinkForm(this.linkBeingEdited)},e.prototype.renderLinkForm=function(e){this.visible=!0,function(e,t){var n=e.state.tr;n.setMeta("type","forestry/render"),n.setMeta("clickTarget",t),e.dispatch(n)}(this.view,e)},e}(),$t=n(298);function qt(e){var t,n,r,o,i=(t="links",(n=document.createElement("div")).setAttribute("id",t),n.style.width="0",n.style.height="0",n);return new W.Plugin({filterTransaction:function(e){switch(e.getMeta("type")){case"forestry/render":return r.render(e.getMeta("clickTarget")),!1;case"forestry/unmount":return r.unmount(),!1;default:return!0}},view:function(t){var n,o;return n=i,(o=t.dom).parentElement.insertBefore(n,o),r=new Vt(i,t),new Wt(t,e,i)},props:{transformPasted:function(e){return o?e:new N.Slice(Ht(e.content),e.openStart,e.openEnd)},handleKeyDown:function(e,t){return o=t.shiftKey,!1}}})}var Ut=/\.(jpe?g|png)/,Ht=function(e){var t=[];return e.forEach((function(e){if(e.isText){for(var n=e.text,r=0,o=void 0,i=e.type.schema.marks.link,a=e.type.schema.nodes.image,s=[];o=$t.a.exec(n);){var c=o.index,l=c+o[0].length;s.push({start:c,end:l})}s.forEach((function(o){var c,l=o.start,u=o.end;l>0&&t.push(e.cut(r,l));var h=n.slice(l,u);Ut.test(h)?(c={src:h,title:"",alt:""},t.push(a.create(c))):(c={href:h,title:h},1===s.length&&(c.editing="editing",c.creating="creating"),t.push(e.cut(l,u).mark(i.create(c).addToSet(e.marks)))),r=u})),r<n.length&&t.push(e.cut(r))}else t.push(e.copy(Ht(e.content)))})),N.Fragment.fromArray(t)};var Kt=n(1379);var Gt=function(e){return new RegExp(""+e+e+"([^\r\n\t\f"+e+"} ](.*[^\r\n\t\f"+e+" ])?)"+e+e)},Jt=function(e){return new RegExp("(^|[^"+e+"])"+e+"([^\r\n\t\f"+e+" ](.*[^\r\n\t\f"+e+" ])?)"+e)},Zt=Gt("\\*"),Qt=Jt("\\*"),Xt=Gt("~"),Yt=Jt("_"),en=Jt("`");function tn(e){var t,n,r,o=[];return(t=e.nodes.blockquote)&&o.push((n=t,Object(Kt.wrappingInputRule)(/^\s*>\s$/,n))),(t=e.nodes.ordered_list)&&o.push(function(e){return Object(Kt.wrappingInputRule)(/^(\d+)\.\s$/,e,(function(e){return{order:+e[1]}}),(function(e,t){return t.childCount+t.attrs.order==+e[1]}))}(t)),(t=e.nodes.bullet_list)&&o.push(function(e){return Object(Kt.wrappingInputRule)(/^\s*([-+*])\s$/,e)}(t)),(t=e.nodes.code_block)&&o.push(function(e){return Object(Kt.textblockTypeInputRule)(/^```([a-zA-Z]*)? $/,e,(function(e){var t=e[1];return t?{params:t}:{}}))}(t)),(t=e.nodes.heading)&&o.push(function(e,t){return Object(Kt.textblockTypeInputRule)(new RegExp("^(#{1,"+t+"})\\s$"),e,(function(e){return{level:e[1].length}}))}(t,6)),(t=e.nodes.horizontal_rule)&&o.push(function(e){return new Kt.InputRule(/^(---|___|\*\*\*)$/,(function(t,n,r,o){return t.tr.replaceRangeWith(r,o,e.create())}))}(t)),(r=e.marks.strong)&&(o.push(nn(Zt,r,{})),o.push(function(e){return nn(Gt("_"),e,{})}(r))),(r=e.marks.s)&&o.push(function(e){return nn(Xt,e,{})}(r)),(r=e.marks.em)&&(o.push(function(e){return rn(Qt,e,{})}(r)),o.push(function(e){return rn(Yt,e,{})}(r))),(r=e.marks.code)&&o.push(function(e){return rn(en,e,{})}(r)),o}function nn(e,t,n){return new Kt.InputRule(e,(function(e,r,o,i){var a=n instanceof Function?n(r):n,s=e.tr;if(r[1]){var c=o+r[0].indexOf(r[1]),l=c+r[1].length;l<i&&s.delete(l,i),c>o&&s.delete(o,c),i=o+r[1].length}return s.addMark(o,i,t.create(a)),s.removeStoredMark(t),s}))}function rn(e,t,n){var r=function(e,t){return function(n,r,o,i,a){var s=t instanceof Function?t(o):t,c=n.tr,l=o[1].length;if(o[2]){var u=i+1+l,h=u+o[2].length,p=[u-1,u],d=[h,h+(function(e,t){try{return e.doc.textBetween(t+1,t+2)}catch(e){return""}}(n,h)?0:1)];c.delete.apply(c,d),c.delete.apply(c,p),a=i+o[2].length+l}return c.addMark(i+l,a,e.create(s)),c.removeStoredMark(e),r&&r(c),c}}(t,n);return new Kt.InputRule(e,(function(e,t,n,o){return r(e,null,t,n,o)}))}function on(e){return Object(Kt.inputRules)({rules:tn(e)})}var an=function(){},sn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sn(t,e),t.nodesFromSchema=function(e){var t=ln(e.nodes);return t.text||(t.text=function(e){return e.text}),t},t.marksFromSchema=function(e){return ln(e.marks)},t}(N.DOMSerializer);function ln(e){var t={};for(var n in e){var r=e[n].spec.toDocument,o=e[n].spec.toDOM;r?t[n]=r:o&&(t[n]=o)}return t}var un,hn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pn=function(e){function t(t){var n=e.call(this)||this;return n.schema=t,n.parser=N.DOMParser.fromSchema(t),n.serializer=cn.fromSchema(t),n}return hn(t,e),t.fromSchema=function(e){return new t(e)},t.prototype.nodeFromString=function(e){var t;try{t=window.document.createRange().createContextualFragment(e)}catch(n){t=(new DOMParser).parseFromString(e,"text/html")}return this.parser.parse(t)},t.prototype.stringFromNode=function(e){var t=document.createElement("div");return t.appendChild(this.serializer.serializeFragment(e.content)),t.innerHTML},t}(an),dn=function(){function e(e,t){this.nodes=e,this.marks=t}return e.prototype.serialize=function(e,t){void 0===t&&(t={});var n=new fn(this.nodes,this.marks,t);return n.renderContent(e),n.out},e}(),fn=function(){function e(e,t,n){this.nodes=e,this.marks=t,this.delim=this.out="",this.closed=!1,this.inTightList=!1,this.options=n||{},void 0===this.options.tightLists&&(this.options.tightLists=!1)}return e.prototype.flushClose=function(e){if(this.closed){if(this.atBlank()||(this.out+="\n"),null==e&&(e=2),e>1){var t=this.delim,n=/\s+$/.exec(t);n&&(t=t.slice(0,t.length-n[0].length));for(var r=1;r<e;r++)this.out+=t+"\n"}this.closed=!1}},e.prototype.wrapBlock=function(e,t,n,r){var o=this.delim;this.write(t||e),this.delim+=e,r(),this.delim=o,this.closeBlock(n)},e.prototype.atBlank=function(){return/(^|\n)$/.test(this.out)},e.prototype.ensureNewLine=function(){this.atBlank()||(this.out+="\n")},e.prototype.write=function(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)},e.prototype.closeBlock=function(e){this.closed=e},e.prototype.text=function(e,t){for(var n=e.split("\n"),r=0;r<n.length;r++){var o=this.atBlank()||this.closed;this.write(),this.out+=!1!==t?this.esc(n[r],o):n[r],r!=n.length-1&&(this.out+="\n")}},e.prototype.render=function(e,t,n){if("number"==typeof t)throw new Error("!");this.nodes[e.type.name](this,e,t,n)},e.prototype.renderContent=function(e){var t=this;e.forEach((function(n,r,o){return t.render(n,e,o)}))},e.prototype.renderInline=function(e){var t=this,n=[],r="",o=function(o,i,a){void 0===a&&(a=0);var s=o?o.marks:[],c=s.findIndex((function(e){return"code"===e.type.name}));c>=0&&s.length>1&&(s=s.slice(0,c).concat(s.slice(c+1,s.length),[s[c]]));var l=r;if(r="",o&&o.isText&&s.some((function(e,n,r){var o=t.marks[e.type.name];return!(!o||!o.expelEnclosingWhitespace)}))&&/^(\s*)(.*?)(\s*)$/.test(o.text||"")){var u=/^(\s*)(.*?)(\s*)$/.exec(o.text),h=(u[0],u[1]),p=u[2],d=u[3];l+=h,r=d,(h||d)&&((o=p?o.withText(p):null)||(s=n))}var f=s.length&&s[s.length-1],m=f&&!1===t.marks[f.type.name].escape,g=s.length-(m?1:0);e:for(var v=0;v<g;v++){var _=s[v];if(!t.marks[_.type.name].mixable)break;for(var b=0;b<n.length;b++){var k=n[b];if(!t.marks[k.type.name].mixable)break;if(_.eq(k)){v>b?s=s.slice(0,b).concat(_).concat(s.slice(b,v)).concat(s.slice(v+1,g)):b>v&&(s=s.slice(0,v).concat(s.slice(v+1,b)).concat(_).concat(s.slice(b,g)));continue e}}}for(var y=0;y<Math.min(n.length,g)&&s[y].eq(n[y]);)++y;for(;y<n.length;)t.text(t.markString(n.pop(),!1,o),!1);if(l&&t.text(l),o){for(;n.length<g;){var w=s[n.length];n.push(w),t.text(t.markString(w,!0,o),!1)}m&&o.isText&&f?t.text(t.markString(f,!1,o)+o.text+t.markString(f,!0,o),!1):t.render(o,e,a)}};e.forEach(o),o(null)},e.prototype.renderList=function(e,t,n){var r=this;this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);var o=this.options.tightLists,i=this.inTightList;this.inTightList=!!o,e.forEach((function(i,a,s){s&&o&&r.flushClose(1),r.wrapBlock(t,n(s),e,(function(){return r.render(i,e,s)}))})),this.inTightList=i},e.prototype.esc=function(e,t){return e=e.replace(/[`\\~\[\]]/g,"\\$&"),t&&(e=e.replace(/^[#\-*+]/,"\\$&").replace(/^(\d+)\./,"$1\\.")),e},e.prototype.quote=function(e){var t=-1==e.indexOf('"')?'""':-1==e.indexOf("'")?"''":"()";return t[0]+e+t[1]},e.prototype.repeat=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},e.prototype.markString=function(e,t,n){var r=this.marks[e.type.name],o=t?r.open:r.close;return"string"==typeof o?o:o(this,e,n)},e.prototype.getEnclosingWhitespace=function(e){return{leading:(e.match(/^(\s+)/)||[])[0],trailing:(e.match(/(\s+)$/)||[])[0]}},e}(),mn=((un={})["text-align:left"]="left",un["text-align:center"]="center",un["text-align:right"]="right",un),gn={left:":---",center:":---:",right:"---:"},vn={blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list"},ordered_list:{block:"ordered_list",getAttrs:function(e){return{order:+e.attrGet("order")||1}}},heading:{block:"heading",getAttrs:function(e){return{level:+e.tag.slice(1)}}},code_block:{block:"code_block"},fence:{block:"code_block",getAttrs:function(e){return{params:e.info||""}}},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:function(e){return{src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null,width:e.attrGet("width")||null,height:e.attrGet("height")||null}}},table:{block:"table"},table_row:{block:"table_row"},table_cell:{block:"table_cell",getAttrs:function(e){var t="";if(e.attrs)for(var n=0;n<e.attrs.length;n++)"style"===e.attrs[n][0]&&(t=e.attrs[n][1]);return{align:mn[t]}}},table_header:{block:"table_header",getAttrs:function(e){var t="";if(e.attrs)for(var n=0;n<e.attrs.length;n++)"style"===e.attrs[n][0]&&(t=e.attrs[n][1]);return{align:mn[t]}}},hardbreak:{node:"hard_break"},em:{mark:"em"},s:{mark:"s"},strong:{mark:"strong"},link:{mark:"link",getAttrs:function(e){return{href:e.attrGet("href"),title:e.attrGet("title")||null}}},code_inline:{mark:"code"}},_n={blockquote:function(e,t){e.wrapBlock("> ",null,t,(function(){return e.renderContent(t)}))},code_block:function(e,t){t.attrs.params?(e.write("```"+t.attrs.params+"\n"),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)):e.wrapBlock("    ",null,t,(function(){return e.text(t.textContent,!1)}))},heading:function(e,t){/\n/.test(t.textContent)&&t.attrs.level<3?(e.renderInline(t),e.write("\n"),e.write(1===t.attrs.level?"=":"-")):(e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t)),e.closeBlock(t)},horizontal_rule:function(e,t){e.write(t.attrs.markup||"***"),e.closeBlock(t)},bullet_list:function(e,t){e.renderList(t,"  ",(function(){return(t.attrs.bullet||"*")+" "}))},ordered_list:function(e,t){var n=t.attrs.order||1,r=String(n+t.childCount-1).length,o=e.repeat(" ",r+2);e.renderList(t,o,(function(t){var o=String(n+t);return e.repeat(" ",r-o.length)+o+". "}))},list_item:function(e,t){e.renderContent(t)},paragraph:function(e,t,n,r){e.renderInline(t),e.closeBlock(t)},image:function(e,t){var n="";(t.attrs.height||t.attrs.width)&&(n=" ="+(t.attrs.width||"")+"x"+(t.attrs.height||""));var r=e.esc(t.attrs.alt||""),o=e.esc(t.attrs.src),i=t.attrs.title?" "+e.quote(t.attrs.title):"";e.write("!["+r+"]("+o+i+n+")")},hard_break:function(e,t,n,r){for(var o=r+1;o<n.childCount;o++)if(n.child(o).type!=t.type)return void e.write("  \n")},text:function(e,t){e.text(t.text)},table:function(e,t){var n=!0;t.forEach((function(t){var r="table_cell"===t.content.child(0).type.name;if(n&&r){e.write("|");for(var o=0;o<t.childCount;o++){var i=t.content.child(o).attrs.align,a=gn[i]||"---";e.write(" "+a+" |")}e.write("\n"),n=!1}_n.table_row(e,t)})),e.closeBlock(t)},table_row:function(e,t){e.write("|"),e.renderContent(t),e.write("\n")},table_cell:function(e,t){e.write(" "),t.forEach((function(t,n,r){for(var o=t.text?t.text.split("\n"):[],i=0;i<o.length;i++){var a=e.atBlank()||e.closed;e.write(),e.out+=e.esc(o[i],a).replace(/[\|]/g,"\\$&"),i!=o.length-1&&(e.out+="\n")}})),e.write(" |")},table_header:function(e,t){_n.table_cell(e,t)}},bn={em:{open:"_",close:"_",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:function(e,t,n){return s(n,"text","").endsWith("*")?t.openedWith="__":"**"},close:function(e,t,n){if(t.openedWith){var r=t.openedWith;return t.openedWith=null,r}return s(n,"text","").endsWith("*")?"__":"**"},mixable:!0,expelEnclosingWhitespace:!0},link:{open:"[",close:function(e,t){return"]("+e.esc(t.attrs.href)+(t.attrs.title?" "+e.quote(t.attrs.title):"")+")"}},s:{open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0},code:{open:"`",close:"`",escape:!1}};function kn(e){return new dn(function(e){var t={};return e.nodes.blockquote&&(t.blockquote=_n.blockquote),e.nodes.paragraph&&(t.paragraph=_n.paragraph),e.nodes.list_item&&(t.list_item=_n.list_item),e.nodes.bullet_list&&(t.bullet_list=_n.bullet_list),e.nodes.ordered_list&&(t.ordered_list=_n.ordered_list),e.nodes.heading&&(t.heading=_n.heading),e.nodes.code_block&&(t.code_block=_n.code_block),e.nodes.horizontal_rule&&(t.horizontal_rule=_n.horizontal_rule),e.nodes.image&&(t.image=_n.image),e.nodes.hard_break&&(t.hard_break=_n.hard_break),e.nodes.ordered_list&&(t.ordered_list=_n.ordered_list),e.nodes.bullet_list&&(t.bullet_list=_n.bullet_list),e.nodes.list_item&&(t.list_item=_n.list_item),e.nodes.table&&(t.table=_n.table,t.table_header=_n.table_header,t.table_row=_n.table_row,t.table_cell=_n.table_cell),t.text=_n.text,t}(e),function(e){var t={};return e.marks.em&&(t.em=bn.em),e.marks.strong&&(t.strong=bn.strong),e.marks.link&&(t.link=bn.link),e.marks.code&&(t.code=bn.code),bn}(e))}function yn(e,t,n){var r,o=t,i={ok:!1,pos:t};for(r=e.charCodeAt(t);t<n&&r>=48&&r<=57||37===r;)r=e.charCodeAt(++t);return i.ok=!0,i.pos=t,i.value=Number(e.slice(o,t)),i}function wn(e,t,n){var r,o,i=e.utils.isSpace,a=e.utils.unescapeAll,s=t.src,c=t.posMax,l=n,u={ok:!1,pos:0,lines:0,str:""};if(60===s.charCodeAt(n)){for(n++;n<c;){if(10===(r=s.charCodeAt(n))||i(r))return u;if(62===r)return u.pos=n+1,u.str=a(s.slice(l+1,n)),u.ok=!0,u;92===r&&n+1<c?n+=2:n++}return u}for(o=0;n<c;){if(61==(r=s.charCodeAt(n))||34==r||39==r){n--;break}if(r<32||127===r)break;if(92===r&&n+1<c)n+=2;else{if(40===r&&o++,41===r){if(0===o)break;o--}n++}}return l===n?u:0!==o?u:(u.str=a(s.slice(l,n)),u.lines=0,u.pos=n,u.ok=!0,u)}function En(e){return function(t,n){var r,o,i,a,s,c,l,u,h,p,d,f,m=null,g=null,v="",_=t.pos,b=t.posMax;if(33!==t.src.charCodeAt(t.pos))return!1;if(91!==t.src.charCodeAt(t.pos+1))return!1;if(s=t.pos+2,(a=e.helpers.parseLinkLabel(t,t.pos+1,!1))<0)return!1;if((c=a+1)<b&&40===t.src.charCodeAt(c)){for(c++;c<b&&(32===(o=t.src.charCodeAt(c))||10===o);c++);if(c>=b)return!1;for(f=c,(u=wn(e,t,c)).ok&&(v=u.str,t.md.validateLink(v)?c=u.pos:v=""),f=c;c<b&&(32===(o=t.src.charCodeAt(c))||10===o);c++);if(u=e.helpers.parseLinkTitle(t.src,c,t.posMax),c<b&&f!==c&&u.ok)for(h=u.str,c=u.pos;c<b&&(32===(o=t.src.charCodeAt(c))||10===o);c++);else h="";if(c-1>=0&&32===(o=t.src.charCodeAt(c-1))&&(u=function(e,t,n){var r,o={ok:!1,pos:0};if(t>=n)return o;if(61!==(r=e.charCodeAt(t)))return o;if(t++,120!==(r=e.charCodeAt(t))&&(r<48||r>57))return o;var i=yn(e,t,n);if(t=i.pos,120!==(r=e.charCodeAt(t)))return o;var a=yn(e,++t,n);return t=a.pos,o.width=i.value,o.height=a.value,o.pos=t,o.ok=!0,o}(t.src,c,t.posMax)).ok)for(m=u.width,g=u.height,c=u.pos;c<b&&(32===(o=t.src.charCodeAt(c))||10===o);c++);if(c>=b||41!==t.src.charCodeAt(c))return t.pos=_,!1;c++}else{if(void 0===t.env.references)return!1;for(;c<b&&(32===(o=t.src.charCodeAt(c))||10===o);c++);if(c<b&&91===t.src.charCodeAt(c)?(f=c+1,(c=e.helpers.parseLinkLabel(t,c))>=0?i=t.src.slice(f,c++):c=a+1):c=a+1,i||(i=t.src.slice(s,a)),!(l=t.env.references[e.utils.normalizeReference(i)]))return t.pos=_,!1;v=l.href,h=l.title}if(!n){t.pos=s,t.posMax=a;var k=new t.md.inline.State(t.src.slice(s,a),t.md,t.env,d=[]);k.md.inline.tokenize(k),(p=t.push("image","img",0)).attrs=r=[["src",v],["alt",""]],p.children=d,h&&r.push(["title",h]),null!==m&&r.push(["width",m]),null!==g&&r.push(["height",g])}return t.pos=c,t.posMax=b,!0}}function On(e){e.inline.ruler.before("emphasis","image",En(e))}function Cn(e){e.inline.ruler.before("emphasis","link",function(e){return function(t,n){var r,o,i,a,s,c,l,u,h,p=t.md.utils.normalizeReference,d=t.md.utils.isSpace,f="",m=t.pos,g=t.posMax,v=t.pos,_=!0;if(91!==t.src.charCodeAt(t.pos))return!1;if(s=t.pos+1,(a=t.md.helpers.parseLinkLabel(t,t.pos,!0))<0)return!1;if((c=a+1)<g&&40===t.src.charCodeAt(c)){for(_=!1,c++;c<g&&(d(o=t.src.charCodeAt(c))||10===o);c++);if(c>=g)return!1;for(v=c,(l=wn(e,t,c)).ok&&(f=l.str,t.md.validateLink(f)?c=l.pos:f=""),v=c;c<g&&(d(o=t.src.charCodeAt(c))||10===o);c++);if(l=t.md.helpers.parseLinkTitle(t.src,c,t.posMax),c<g&&v!==c&&l.ok)for(h=l.str,c=l.pos;c<g&&(d(o=t.src.charCodeAt(c))||10===o);c++);else h="";(c>=g||41!==t.src.charCodeAt(c))&&(_=!0),c++}if(_){if(void 0===t.env.references)return!1;if(c<g&&91===t.src.charCodeAt(c)?(v=c+1,(c=t.md.helpers.parseLinkLabel(t,c))>=0?i=t.src.slice(v,c++):c=a+1):c=a+1,i||(i=t.src.slice(s,a)),!(u=t.env.references[p(i)]))return t.pos=m,!1;f=u.href,h=u.title}return n||(t.pos=s,t.posMax=a,t.push("link_open","a",1).attrs=r=[["href",f]],h&&r.push(["title",h]),t.md.inline.tokenize(t),t.push("link_close","a",-1)),t.pos=c,t.posMax=g,!0}}(e))}var xn=n(429);var Sn=function(){function e(e,t){this.schema=e,this.stack=[{type:e.topNodeType,content:[]}],this.marks=N.Mark.none,this.tokenHandlers=t}return e.prototype.top=function(){return this.stack[this.stack.length-1]},e.prototype.push=function(e){this.stack.length&&this.top().content.push(e)},e.prototype.addText=function(e){if(e){var t,n=this.top().content,r=n[n.length-1],o=this.schema.text(e,this.marks);r&&(t=function(e,t){if(e.isText&&t.isText&&N.Mark.sameSet(e.marks,t.marks))return e.copy(e.text+t.text)}(r,o))?n[n.length-1]=t:n.push(o)}},e.prototype.openMark=function(e){this.marks=e.addToSet(this.marks)},e.prototype.closeMark=function(e){this.marks=e.removeFromSet(this.marks)},e.prototype.parseTokens=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.tokenHandlers[n.type];if(!r)throw new Error("Token type `"+n.type+"` not supported by Markdown parser");r(this,n)}},e.prototype.addNode=function(e,t,n){var r=e.createAndFill(t,n,this.marks);return r?(this.push(r),r):null},e.prototype.openNode=function(e,t){this.stack.push({type:e,attrs:t,content:[]})},e.prototype.closeNode=function(){this.marks.length&&(this.marks=N.Mark.none);var e=this.stack.pop();return e?this.addNode(e.type,e.attrs,e.content):Object(h.a)("Attempted to close a non-existent node.")},e}();function An(e,t){return e.getAttrs?e.getAttrs(t):e.attrs instanceof Function?e.attrs(t):e.attrs}function Mn(e){return"code_inline"==e||"code_block"==e||"fence"==e}function jn(e){return"\n"==e[e.length-1]?e.slice(0,e.length-1):e}function Nn(){}var Tn=/\[(.+)\]\((\{\{.*\}\})\)/g;function In(e,t){var n=Object.create(null),r=function(r){var o=t[r];if(o.block){var i=e.nodeType(o.block);Mn(r)?n[r]=function(e,t){e.openNode(i,An(o,t)),e.addText(jn(t.content)),e.closeNode()}:(n[r+"_open"]=function(e,t){return e.openNode(i,An(o,t))},n[r+"_close"]=function(e){return e.closeNode()})}else if(o.node){var a=e.nodeType(o.node);n[r]=function(e,t){return e.addNode(a,An(o,t))}}else if(o.mark){var s=e.marks[o.mark];Mn(r)?n[r]=function(e,t){e.openMark(s.create(An(o,t))),e.addText(jn(t.content)),e.closeMark(s)}:(n[r+"_open"]=function(e,t){return e.openMark(s.create(An(o,t)))},n[r+"_close"]=function(e){return e.closeMark(s)})}else{if(!o.ignore)throw new RangeError("Unrecognized parsing spec "+JSON.stringify(o));Mn(r)?n[r]=Nn:(n[r+"_open"]=Nn,n[r+"_close"]=Nn)}};for(var o in t)r(o);return n.text=function(t,n){return function(e,t,n){for(var r,o=0,i=n.marks.link,a=t.content;null!==(r=Tn.exec(a));)e.addText(a.substr(o,r.index)),e.openMark(i.create({href:r[2]})),e.addText(r[1]),e.closeMark(i),o=r.index+r[0].length;o<a.length&&e.addText(a.substr(o,a.length))}(t,n,e)},n.inline=function(e,t){return e.parseTokens(t.children)},n.softbreak=function(e){return e.addText("\n")},n}var Pn=function(){function e(e,t,n){this.tokens=n,this.schema=e,this.tokenizer=t,this.tokenHandlers=In(e,n)}return e.prototype.parse=function(e){var t,n=new Sn(this.schema,this.tokenHandlers);n.parseTokens(this.tokenizer.parse(e,{}));do{t=n.closeNode()}while(n.stack.length);return t},e}();function Ln(e){var t=xn({html:!1});return t.use(On),t.use(Cn),new Pn(e,t,function(e){var t={};return e.nodes.blockquote&&(t.blockquote=vn.blockquote),e.nodes.paragraph&&(t.paragraph=vn.paragraph),e.nodes.list_item&&(t.list_item=vn.list_item),e.nodes.bullet_list&&(t.bullet_list=vn.bullet_list),e.nodes.ordered_list&&(t.ordered_list=vn.ordered_list),e.nodes.heading&&(t.heading=vn.heading),e.nodes.code_block&&(t.code_block=vn.code_block,t.fence=vn.fence),e.nodes.horizontal_rule&&(t.hr=vn.hr),e.nodes.image&&(t.image=vn.image),e.nodes.hard_break&&(t.hardbreak=vn.hardbreak),e.nodes.ordered_list&&(t.ordered_list=vn.ordered_list),e.nodes.bullet_list&&(t.bullet_list=vn.bullet_list),e.nodes.list_item&&(t.list_item=vn.list_item),e.nodes.table&&(t.table=vn.table,t.thead={ignore:!0},t.th=vn.table_header,t.tbody={ignore:!0},t.tr=vn.table_row,t.td=vn.table_cell),e.marks.em&&(t.em=vn.em),e.marks.strong&&(t.strong=vn.strong),e.marks.link&&(t.link=vn.link),e.marks.code&&(t.code_inline=vn.code_inline),e.marks.s&&(t.s=vn.s),t}(e))}var Rn=n(403),Dn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zn=function(e){function t(t){var n=e.call(this)||this;return n.parser=null,n.serializer=null,n.schema=t,n}return Dn(t,e),t.fromSchema=function(e,n){switch(n.flavour){case Rn.b.Kramdown:return t.kramdown(e);case Rn.b.Discount:return t.discount(e);case Rn.b.CommonMark:default:return t.commonMarkFromSchema(e)}},t.discount=function(e){return t.commonMarkFromSchema(e)},t.kramdown=function(e){return t.commonMarkFromSchema(e)},t.commonMarkFromSchema=function(e){var n=new t(e);return n.parser=Ln(e),n.serializer=kn(e),n},t.prototype.nodeFromString=function(e){return this.parser.parse(e)},t.prototype.stringFromNode=function(e){return this.serializer.serialize(e,{tightLists:!0})},t}(an);var Bn=n(1448),Fn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vn=i.bind(Bn),Wn="undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform(),$n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cheatSheetExpanded:!1},t.cheatSheetToggle=function(){return t.setState((function(){return{cheatSheetExpanded:!t.state.cheatSheetExpanded}}))},t.open=Re("Ctrl-/",(function(e){e.stopPropagation(),t.setState((function(e){return{cheatSheetExpanded:!e.cheatSheetExpanded}}))})),t}return Fn(t,e),t.prototype.componentDidMount=function(){document.addEventListener("keypress",this.open)},t.prototype.componentWillUnmount=function(){document.removeEventListener("keypress",this.open)},t.prototype.render=function(){var e=this.state.cheatSheetExpanded;return r.createElement(X.Dismissible,{active:e,onDismiss:this.cheatSheetToggle,escape:!0},r.createElement("div",{className:Vn("cheatsheet")},r.createElement("div",{className:Vn("cheatsheet--button"),onClick:this.cheatSheetToggle,"data-tooltip":"Keyboard shortcuts","data-side":"left"},r.createElement(K.Icon,{name:"Keyboard",width:20,height:20})),r.createElement("div",{className:Vn("cheatsheet--panel",{expanded:e})},r.createElement("h2",{className:Vn("cheatsheet--title")},"Keyboard shortcuts"),r.createElement("span",{className:Vn("cheatsheet--sub-title")},"Quick access",r.createElement("span",{className:Vn("cheatsheet--key")},"Ctrl"),r.createElement("span",{className:Vn("cheatsheet--key")},"/")),r.createElement("span",{className:Vn("cheatsheet--list-title label")},"Formatting"),r.createElement("ul",{className:Vn("cheatsheet--list")},r.createElement(qn,{keys:[Wn?"⌘":"Ctrl","b"]},r.createElement("strong",null,"Bold")),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl","i"]},r.createElement("em",null,"Italic")),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl","k"]},r.createElement("span",{className:Vn("cheatsheet--function--link")},"Link")),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl","0"]},r.createElement("em",null,"Code"))),r.createElement("span",{className:Vn("cheatsheet--list-title label")},"Markdown formatting"),r.createElement("ul",{className:Vn("cheatsheet--list")},r.createElement(qn,{keys:["#","Space"]},r.createElement("span",{className:Vn("cheatsheet--function--h1")},"Header 1")),r.createElement(qn,{keys:["##","Space"]},r.createElement("span",{className:Vn("cheatsheet--function--h2")},"Header 2")),r.createElement(qn,{keys:["###","Space"]},r.createElement("span",{className:Vn("cheatsheet--function--h3")},"Header 3")),r.createElement(qn,{keys:["####","Space"]},r.createElement("span",{className:Vn("cheatsheet--function--h4")},"Header 4")),r.createElement(qn,{keys:["#####","Space"]},r.createElement("span",{className:Vn("cheatsheet--function--h5")},"Header 5")),r.createElement(qn,{keys:["######","Space"]},r.createElement("span",{className:Vn("cheatsheet--function--h6")},"Header 6")),r.createElement(qn,{keys:["1.","Space"]},r.createElement("ol",null,r.createElement("li",null,"Numbered list"))),r.createElement(qn,{keys:["*","Space"]},r.createElement("ul",null,r.createElement("li",null,"Bulleted list"))),r.createElement(qn,{keys:[">","Space"]},r.createElement("blockquote",null,"Blockquote")),r.createElement(qn,{keys:["**bold**"]},r.createElement("strong",null,"Bold")),r.createElement(qn,{keys:["_italic_"]},r.createElement("em",null,"Italic")),r.createElement(qn,{keys:["~~strike~~"]},r.createElement("del",null,"Strike")),r.createElement(qn,{keys:["```","Space"]},r.createElement("code",null,"Code block")),r.createElement(qn,{keys:["`code`"]},r.createElement("code",null,"Code")),r.createElement(qn,{keys:["---"]},"Divider")),r.createElement("span",{className:Vn("cheatsheet--list-title label")},"Block Formatting"),r.createElement("ul",{className:Vn("cheatsheet--list")},r.createElement(qn,{keys:[Wn?"⌘":"Ctrl",Wn?"Opt":"Alt","1"]},r.createElement("span",{className:Vn("cheatsheet--function--h1")},"Header 1")),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl",Wn?"Opt":"Alt","2"]},r.createElement("span",{className:Vn("cheatsheet--function--h2")},"Header 2")),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl",Wn?"Opt":"Alt","3"]},r.createElement("span",{className:Vn("cheatsheet--function--h3")},"Header 3")),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl",Wn?"Opt":"Alt","4"]},r.createElement("span",{className:Vn("cheatsheet--function--h4")},"Header 4")),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl",Wn?"Opt":"Alt","5"]},r.createElement("span",{className:Vn("cheatsheet--function--h5")},"Header 5")),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl",Wn?"Opt":"Alt","6"]},r.createElement("span",{className:Vn("cheatsheet--function--h6")},"Header 6")),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl",Wn?"Opt":"Alt","7"]},r.createElement("ol",null,r.createElement("li",null,"Numbered list"))),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl",Wn?"Opt":"Alt","8"]},r.createElement("ul",null,r.createElement("li",null,"Bulleted list"))),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl",">"]},r.createElement("blockquote",null,"Enter Blockquote")),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl","<"]},r.createElement("blockquote",null,"Exit Blockquote")),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl","Alt","0"]},r.createElement("code",null,"Code block")),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl","Enter"]},"Divider")),r.createElement("span",{className:Vn("cheatsheet--list-title label")},"Editing"),r.createElement("ul",{className:Vn("cheatsheet--list")},r.createElement(qn,{keys:[Wn?"⌘":"Ctrl","Z"]},"Undo"),r.createElement(qn,{keys:[Wn?"⌘":"Ctrl","Shift","Z"]},"Redo"),r.createElement(qn,{keys:["Tab"]},"Indent"),r.createElement(qn,{keys:["Shift","Tab"]},"Unindent"),r.createElement(qn,{keys:["Shift","Enter"]},"New Line"),r.createElement(qn,{keys:["Ctrl","Shift","U"]},"Media Library"),r.createElement(qn,{keys:["Ctrl","Shift","J"]},"Preview"))),r.createElement("div",{className:Vn("cheatsheet--close-button"),onClick:this.cheatSheetToggle},r.createElement(K.Icon,{name:"X",width:12,height:12,stroke:2}))))},t}(r.Component),qn=function(e){return r.createElement("li",{className:Vn("cheatsheet--list-item")},r.createElement("div",{className:Vn("cheatsheet--function")},e.children),r.createElement("div",{className:Vn("cheatsheet--key-group")},e.keys.map((function(e){return r.createElement("span",{key:e,className:Vn("cheatsheet--key")},e)}))))};var Un=n(1356),Hn=function(){function e(e,t,n){var r=this;this.node=e,this.view=t,this.getPos=n,this.updating=!1,this.onCursorActivity=function(){r.updating||r.forwardSelection()},this.forwardSelection=function(){if(r.cm.hasFocus()){var e=r.view.state,t=r.asProseMirrorSelection(e.doc);t.eq(e.selection)||r.view.dispatch(e.tr.setSelection(t))}},this.onChange=function(){r.updating||r.valueChanged()},this.cm=this.setupCodeMirror(e),this.dom=this.cm.getWrapperElement(),setTimeout((function(){return r.cm.refresh()}),20),this.cm.on("cursorActivity",this.onCursorActivity),this.cm.on("changes",this.onChange),this.cm.on("focus",this.forwardSelection)}return e.prototype.valueChanged=function(){var e=Kn(this.node.textContent,this.cm.getValue());if(e){var t=this.getPos()+1,n=this.view.state.schema,r=this.view.state.tr.replaceWith(t+e.from,t+e.to,e.text?n.text(e.text):null);this.view.dispatch(r)}},e.prototype.asProseMirrorSelection=function(e){var t=this.getPos()+1,n=this.cm.indexFromPos(this.cm.getCursor("anchor"))+t,r=this.cm.indexFromPos(this.cm.getCursor("head"))+t;return W.TextSelection.create(e,n,r)},e.prototype.setSelection=function(e,t){this.cm.focus(),this.updating=!0,this.cm.setSelection(this.cm.posFromIndex(e),this.cm.posFromIndex(t)),this.updating=!1},e.prototype.setupCodeMirror=function(e){return Un(null,{value:e.textContent,lineNumbers:!0,extraKeys:this.codeMirrorKeymap(),mode:e.attrs.params,theme:"forestry"})},e.prototype.codeMirrorKeymap=function(){var e,t=this,n=this.view,r=/Mac/.test(navigator.platform)?"Cmd":"Ctrl";return Un.normalizeKeyMap(((e={Up:function(){return t.maybeEscape("line",-1)},Left:function(){return t.maybeEscape("char",-1)},Down:function(){return t.maybeEscape("line",1)},Right:function(){return t.maybeEscape("char",1)},Backspace:function(){if(!(e=t.cm,function(t,n){var r=e.getCursor(),o=e.getValue(),i=!o.replace(/[ \r\n]/g,"");if(0!=r.line||0!=r.ch||!i)return!1;var a=t.selection.$from;return n&&n(t.tr.replaceRangeWith(a.pos-1,a.pos+o.length+1,t.schema.nodes.paragraph.create()).setSelection(W.Selection.near(t.doc.resolve(a.pos-1)))),!0})(t.view.state,t.view.dispatch))return Un.Pass;var e;t.view.focus()}})[r+"-Z"]=function(){return Object(U.undo)(n.state,n.dispatch)},e["Shift-"+r+"-Z"]=function(){return Object(U.redo)(n.state,n.dispatch)},e[r+"-Shift-Enter"]=function(){var e=t.cm.getCursor();if(t.cm.somethingSelected()||e.line!=t.cm.firstLine())return Un.Pass;if(n.state.selection.$anchor.parentOffset){var r=n.state.selection.$anchor.pos;n.dispatch(n.state.tr.setSelection(W.Selection.near(t.view.state.doc.resolve(r-1),-1)))}return function(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),a=r.indexAfter(-1),s=i.defaultContentType(a);if(!i.canReplaceWith(a,a,s))return!1;if(t){var c=r.before(),l=e.tr.replaceWith(c,c,s.createAndFill());l.setSelection(W.Selection.near(l.doc.resolve(c),-1)),t(l.scrollIntoView())}return!0}(n.state,n.dispatch)&&n.focus(),!0},e["Shift-Enter"]=function(){var e=t.cm.getCursor();if(t.cm.somethingSelected()||e.line!=t.cm.lastLine())return Un.Pass;if(n.state.selection.$anchor.parentOffset){var r=n.state.selection.$anchor.pos;n.dispatch(n.state.tr.setSelection(W.Selection.near(t.view.state.doc.resolve(r-1),-1)))}return Object(G.exitCode)(n.state,n.dispatch)?n.focus():function(e,t){var n=e.selection.$head,r=n.node(-1),o=n.indexAfter(-1),i=r.defaultContentType(o);if(t){var a=n.before(),s=e.tr.replaceWith(a,a,i.createAndFill());s.setSelection(W.Selection.near(s.doc.resolve(a),1)),t(s.scrollIntoView())}return!0}(n.state,n.dispatch)?n.focus():void 0},e))},e.prototype.maybeEscape=function(e,t){var n=this.cm.getCursor();if(this.cm.somethingSelected()||n.line!=(t<0?this.cm.firstLine():this.cm.lastLine())||"char"==e&&n.ch!=(t<0?0:this.cm.getLine(n.line).length))return Un.Pass;var r=this.getPos()+(t<0?0:this.node.nodeSize),o=W.Selection.near(this.view.state.doc.resolve(r),t);if(!(o.$from.pos+1<this.view.state.doc.content.size))return Un.Pass;this.view.dispatch(this.view.state.tr.setSelection(o)),this.view.focus()},e.prototype.update=function(e){if(e.type!=this.node.type)return!1;this.node=e;var t=Kn(this.cm.getValue(),e.textContent);return t&&(this.updating=!0,this.cm.replaceRange(t.text,this.cm.posFromIndex(t.from),this.cm.posFromIndex(t.to)),this.updating=!1),!0},e.prototype.selectNode=function(){this.cm.focus()},e.prototype.stopEvent=function(){return!0},e}();function Kn(e,t){if(e==t)return null;for(var n=0,r=e.length,o=t.length;n<r&&e.charCodeAt(n)==t.charCodeAt(n);)++n;for(;r>n&&o>n&&e.charCodeAt(r-1)==t.charCodeAt(o-1);)r--,o--;return{from:n,to:r,text:t.slice(n,o)}}var Gn=function(){return(Gn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Jn(e,t){var n=function(t,n){return Object(H.render)(r.createElement(e,Gn({},t)),n)},o=t.shouldSelect||function(){return!0},i=t.modifyMount||function(e){return e};return function(e,t,r,a){var s=i(document.createElement("div"));return n({node:e,view:t,decorations:a,getPos:r},s),{dom:s,update:function(e,o){return n({node:e,view:t,decorations:o,getPos:r},s),!0},destroy:function(){Object(H.unmountComponentAtNode)(s)},stopEvent:function(e){return"mousedown"==e.type?!o(e):!/drag/.test(e.type)},ignoreMutation:function(e){return!0}}}}var Zn=n(1449),Qn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xn=function(){return(Xn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Yn=i.bind(Zn),er=Jn(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={expanded:!1,controls:!1,alt:t.props.node.attrs.alt||"",title:t.props.node.attrs.title||""},t.toggleControls=function(){t.setState((function(e){return{controls:!e.controls,expanded:!1}}),t.save)},t.mediaControlsExpandedToggle=function(){return t.setState((function(e){return{expanded:!e.expanded}}),t.save)},t.align=function(e){return Ve(t.props.view.state,t.props.view.dispatch,t.props.getPos(),e)},t.remove=function(){return We(t.props.view.state,t.props.view.dispatch,t.props.getPos())},t.onChange=function(e){var n={title:t.titleEl.value,alt:t.altTextEl.value};t.setState((function(){return n}))},t.save=function(){if(!t.state.expanded){var e=t.props.node,n=t.props.getPos(),r=t.props.view,o=r.dispatch,i=r.state,a=Xn({},e.attrs,{alt:t.state.alt,title:t.state.title});o(i.tr.setNodeMarkup(n,e.type,a,e.marks))}},t.titleRef=function(e){return t.titleEl=e},t.altTextRef=function(e){return t.altTextEl=e},t}return Qn(t,e),t.prototype.shouldComponentUpdate=function(e,t){var n=this.props.node.attrs,r=e.node.attrs;return n.src!==r.src||n.align!==r.align||this.state.controls!==t.controls||this.state.expanded!==t.expanded||this.state.alt!==t.alt||this.state.title!==t.title},t.prototype.render=function(){var e=this.props.node,n=e.attrs.src||"",o=n.startsWith("http")?n:T.a.media.getBodyServeUrl(n),i=Xn({},e.attrs,{alt:e.attrs.alt||n,src:o}),a=this.state,s=a.expanded,c=a.controls;return r.createElement("div",{className:Yn("image-wrapper"),onClick:t.preventBubble},r.createElement(X.Dismissible,{onDismiss:this.toggleControls,escape:!0,active:c},c&&r.createElement("div",{className:Yn("media-controls",{expanded:s})},r.createElement("div",{className:Yn("media-controls--top")},r.createElement("div",{className:Yn("alignment-group")},r.createElement(tr,{name:"AlignLeft",node:e,align:"left",onClick:this.align}),r.createElement(tr,{name:"AlignCenter",node:e,align:"center",onClick:this.align}),r.createElement(tr,{name:"AlignRight",node:e,align:"right",onClick:this.align})),r.createElement("div",{className:Yn("media-controls--icon",{active:s}),onClick:this.mediaControlsExpandedToggle},r.createElement(K.Icon,{name:"Pencil",width:18,height:18,stroke:1}))),r.createElement("div",{className:Yn("media-controls--bottom",{open:s})},r.createElement("div",{className:Yn("input")},r.createElement("span",{className:"label"},"Title"),r.createElement("input",{ref:this.titleRef,type:"text",placeholder:"Give your image a title",value:this.state.title,onChange:this.onChange})),r.createElement("div",{className:Yn("input")},r.createElement("span",{className:"label"},"Alt text"),r.createElement("input",{ref:this.altTextRef,type:"text",placeholder:"Describe your photo",value:this.state.alt,onChange:this.onChange}))))),r.createElement("img",Xn({onClick:this.toggleControls},i)))},t.preventBubble=function(e){return e.stopPropagation()},t}(r.Component),{shouldSelect:function(e){return e.target&&"IMG"===e.target.tagName}}),tr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){return t.props.onClick(t.props.align)},t}return Qn(t,e),t.prototype.render=function(){var e=this.props,t=e.node,n=e.align,o=e.name;return r.createElement("div",{className:Yn("media-controls--icon",{active:t.attrs.align===n}),onClick:this.onClick},r.createElement(K.Icon,{name:o,width:18,height:18,stroke:1}))},t}(r.Component),nr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rr={image:er,table:Jn(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nr(t,e),t.prototype.render=function(){return r.createElement("p",null,"Tables are not yet supported.",r.createElement("br",null),"Click ",r.createElement("strong",null,"Raw Editor")," in the options menu above to edit the source.")},t}(r.Component),{modifyMount:function(e){return e.setAttribute("class","table-placeholder"),e}}),code_block:function(e,t,n){return new Hn(e,t,n)}};n.d(t,"WysiwygTextarea",(function(){return sr}));var or=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ir=i.bind(p),ar=a.a,sr=function(e){function t(t){var n=e.call(this,t)||this;return n.element=null,n.editorView=null,n.schema=null,n.translator=null,n.changeDispatcher=new u.a((function(e){return n.props.input.onChange(n.translator.stringFromNode(e.doc))}),200),n.handleRef=function(e){n.element=e,n.setupEditor(n.props.input.value)},n.setupSchema=function(e){var t=n.format(e),r=s(e,"schema.flavour");n.schema=function(e){if("markdown"===e)return B;if("html-blocks"===e)return B;if("simple-markdown"===e){var t=R({code:!0,link:!0,strong:!0,em:!0,s:!0});return t.link.toDocument=function(e){var t=e.attrs,n=(t.editing,t.creating,F(t,["editing","creating"]));return n.target="_blank",["a",n]},new N.Schema({nodes:w(!1,{code_block:!1,blockquote:!1,horizontal_rule:!1,heading:!1,table:!1}),marks:t})}return z}(t),n.translator=function(e){return"markdown"===e?zn:pn}(t).fromSchema(n.schema,{flavour:r})},n.dispatchTransaction=function(e){if(!n.editorView)return Object(h.a)("Failed to dispatch Transaction. Editor was destroyed.");var t=n.editorView.state.apply(e);n.editorView.updateState(t),e.docChanged?n.changeDispatcher.callback(e):n.forceUpdate()},n.setupSchema(t),n}return or(t,e),t.prototype.componentWillReceiveProps=function(e){if(this.schemaShouldUpdate(e))return this.resetEditor(e);var t=void 0!==this.currentValue,n=this.currentValue!==e.input.value;t&&n&&this.setEditorState(e.input.value)},t.prototype.setupEditor=function(e,t){if(null===this.element)return Object(h.a)("Attempted to setup editor when the mounting element was not present.");this.editorView=new c.EditorView(this.element,{dispatchTransaction:this.dispatchTransaction,state:this.createState(e,t),nodeViews:rr})},t.prototype.resetEditor=function(e){var t=this.format(e);this.editorView?this.editorView.destroy():Object(h.a)("Attempted to reset editor before it was initialized."),this.setupSchema(e),this.setupEditor(e.input.value,t)},t.prototype.setEditorState=function(e){if(!this.editorView)return Object(h.a)("Attempting to set state of null editorView.");this.editorView.updateState(this.createState(e))},t.prototype.format=function(e){var t=e||this.props;return s(t,"schema.format","html")},t.prototype.createState=function(e,t){if(void 0===e&&(e=""),!this.schema)return Object(h.a)("Attempted to initialize Editor State without a Schema.");if(!this.translator)return Object(h.a)("Attempted to initialize Editor State without a Translator.");var n=this.schema,r=this.translator,o=this.context.store,i=!!this.props.fullsize;return function(e,t,n,r){r.blockContent;var o=r.fullsize,i=r.format,a=r.store;return W.EditorState.create({schema:e,doc:t.nodeFromString(n),plugins:[on(e),Pt(e),Object(U.history)(),qt(e),Object($.dropCursor)({width:2,color:"rgb(33, 224, 158)"}),Object(q.gapCursor)(),wt(a,t,!o,i)]})}(n,r,e,{blockContent:s(this.props,"schema.blockContent",!1),store:o,fullsize:i,format:t=t||this.format()})},Object.defineProperty(t.prototype,"currentValue",{get:function(){if(this.editorView)return this.translator.stringFromNode(this.editorView.state.doc)},enumerable:!0,configurable:!0}),t.prototype.schemaShouldUpdate=function(e){return ar(this.props.schema||{},e.schema||{})},t.prototype.render=function(){var e=this.props.fullsize;return r.createElement("div",{className:ir({fullsize:e})},r.createElement("div",{className:ir("rich-text"),ref:this.handleRef}),e&&"markdown"===this.format()&&r.createElement($n,null))},t.contextTypes={store:o.any},t}(l.View)}}]);
//# sourceMappingURL=forestry-wysiwyg.4b2e2877862e30d6f66f.min.js.map