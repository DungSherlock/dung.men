(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1380:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,10}$/i,o=function(e,t){return void 0===t&&(t=r),t.test(e)}},1381:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,o=n(1),i=n(0),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function u(e){var t;return(t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.prototype.render=function(){return i.createElement(e,c({},this.props,{authorize:this.context.authorizer.authorize}))},n}(i.Component)).contextTypes={authorizer:o.object},t}},1450:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(538);var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Submit Validation Failed"));return n.errors=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=o)&&r.__esModule?r:{default:r}).default);t.default=i},655:function(e,t,n){"use strict";n.r(t);var r,o,i,a,c,u,l,s=n(7),p=n(251),f=n(0),d=n(141),m=n(93),h=n(1380),b=n(1),y=n(301),g=n(573),w=n(2),v=n(3),O=n(5),E=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},x=w.default.div(r||(r=E(["\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  float: left;\n\n  position: relative;\n  min-height: 1px;\n  padding-left: 15px;\n  padding-right: 15px;\n  margin-bottom: 20px;\n\n  > a {\n    display: flex;\n    flex-direction: column;\n    padding: 20px 20px 0px 20px;\n  }\n\n  i {\n    font-size: 32px;\n    border: 1px solid #e4e4e4;\n    border-radius: 4px;\n    padding: 20px 28px;\n    margin-bottom: 12px;\n  }\n"],["\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  float: left;\n\n  position: relative;\n  min-height: 1px;\n  padding-left: 15px;\n  padding-right: 15px;\n  margin-bottom: 20px;\n\n  > a {\n    display: flex;\n    flex-direction: column;\n    padding: 20px 20px 0px 20px;\n  }\n\n  i {\n    font-size: 32px;\n    border: 1px solid #e4e4e4;\n    border-radius: 4px;\n    padding: 20px 28px;\n    margin-bottom: 12px;\n  }\n"]))),j=w.default.div(o||(o=E(["\n  margin: 20px;\n  text-align: center;\n  color: white;\n"],["\n  margin: 20px;\n  text-align: center;\n  color: white;\n"]))),_=w.default.div(i||(i=E(["\n  * {\n    margin: auto;\n  }\n"],["\n  * {\n    margin: auto;\n  }\n"]))),P=Object(w.default)(v.Label)(a||(a=E(["\n  color: ",";\n  margin-top: 150px;\n"],["\n  color: ",";\n  margin-top: 150px;\n"])),O.a.colors.error),k=function(e){var t=e.chooseSourceProvider,n=e.currentLoadingProvider,r=e.errorMsg;return f.createElement(j,null,f.createElement("p",null,"Or log in with:"),f.createElement(x,null,f.createElement("a",{onClick:function(){t("github")}},f.createElement("i",{className:"icon icon-github"}),"GitHub"),f.createElement("a",{onClick:function(){return t("gitlab")}},f.createElement("i",{className:"icon icon-gitlab"}),"GitLab"),f.createElement("a",{onClick:function(){return t("bitbucket")}},f.createElement("i",{className:"icon icon-bitbucket"}),"Bitbucket")),n&&f.createElement(_,null,f.createElement(v.Spinner,null)),f.createElement(P,null,r))},S=n(39),L=n(54),N=n(16),C=n(10),M=n(51),T=Object(S.a)({method:N.a.auth.authenticate,before:C.i,success:[function(e){var t=e.user,n=e.auth_token,r=e.websocket;return Object(C.j)({user:t,websocket:r,jwt:n})},function(e){var t=e.user;return Object(C.l)(t)},function(){return Object(L.c)("/")}],failure:C.h}),F=Object(S.a)({method:N.a.auth.getUserInfo,before:C.i,success:[function(e){return Object(C.j)({user:e,websocket:e.websocket,jwt:M.a.jwt})},function(e){return Object(C.l)(e)},function(){return Object(L.c)("/")}],failure:C.h}),z=n(1450),A=n.n(z),G=n(1381),R=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),I=function(){return(I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Z=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(a,c)}u((r=r.apply(e,t||[])).next())}))},q=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.windowMessageTimeout=null,t.state={currentLoadingProvider:null,errorMsg:null},t.chooseSourceProvider=function(e){return Z(t,void 0,void 0,(function(){var t=this;return q(this,(function(n){return this.state.currentLoadingProvider||(this.setState({currentLoadingProvider:e}),this.props.login(e).then((function(){t.setState({currentLoadingProvider:null})})).catch((function(){t.setState({currentLoadingProvider:null,errorMsg:"Login Failed"})}))),[2]}))}))},t}return R(t,e),t.prototype.componentWillUnmount=function(){this.state.windowMessageTimeout&&clearTimeout(this.state.windowMessageTimeout)},t.prototype.render=function(){return f.createElement(k,{currentLoadingProvider:this.state.currentLoadingProvider||"",chooseSourceProvider:this.chooseSourceProvider,errorMsg:this.state.errorMsg||""})},t}(f.Component),H=Object(G.a)(Object(s.b)(null,(function(e){return{onOauthLogin:function(t){return Object(M.d)(t),e(F()).toPromise().then((function(e){if(e.error)throw new Error(e.error)})).catch((function(){throw new A.a({_error:"Login failed"})}))}}}),(function(e,t,n){return I({},e,t,n,{login:function(e){return Z(void 0,void 0,void 0,(function(){var r;return q(this,(function(o){switch(o.label){case 0:return[4,n.authorize(e)];case 1:return r=o.sent(),[2,t.onOauthLogin(r.jwt)]}}))}))}})}))(B)),J=n(293),U=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),D=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasError:!1},t}return U(t,e),t.prototype.componentDidCatch=function(e){this.context.logger.error(e),this.setState((function(){return{hasError:!0}}))},t.prototype.render=function(){var e=this.state.hasError?f.createElement(W,null):this.props.render();return f.createElement("div",{className:"wrapper login"},f.createElement("div",{className:"login-form--container"},f.createElement("div",{className:"login-form--logo"},f.createElement(y.a,null)),f.createElement("div",{className:"login-form--card"},e),f.createElement(H,null),this.props.renderLink()),f.createElement(g.a,null))},t.contextTypes={logger:b.any},t}(f.Component),W=function(){return f.createElement(J.b,null,f.createElement($,null,f.createElement("h2",null,"Something has gone terribly wrong!"),f.createElement("p",null,"Please contact support for help troubleshooting this issue.")),f.createElement(v.Button,{primary:!0,onClick:function(){window.localStorage.clear(),window.location.reload(!0)}},"Refresh might help 🤷‍"))},$=w.default.div(u||(u=D(["\n  margin-bottom: 2rem;\n  text-align: center;\n"],["\n  margin-bottom: 2rem;\n  text-align: center;\n"]))),K=n(247),Q=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),X=function(){return(X=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.validate=function(e){var t={};return e.email?Object(h.a)(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<8&&(t.password="Must be at least 8 characters long"):t.password="Required",t},t}return Q(t,e),t.prototype.render=function(){var e=this,t=this.props.onSubmit;return f.createElement(V,{renderLink:function(){return f.createElement(ee,null)},render:function(){return f.createElement(d.b,{onSubmit:t,validate:e.validate},(function(e){var t=e.handleSubmit,n=e.submitting,r=e.invalid,o=e.error;return f.createElement("form",{onSubmit:t,className:"login-form--form",method:"POST",autoComplete:"on"},f.createElement(d.a,{component:te,name:"email",label:"Email",type:"email",autoFocus:!0}),f.createElement(d.a,{component:te,name:"password",label:"Password",type:"password"}),f.createElement("div",{className:"login-form--button"},f.createElement(m.b,{primary:!0,onClick:t,loading:n,disabled:r||n},"Login")),f.createElement(ne,{visible:o},"Please check your email and password and try again!"))}))}})},t}(f.Component),ee=function(){return f.createElement(K.a,{to:"/forgot",className:"forgot-password"},"Forgot password?")},te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Q(t,e),t.prototype.render=function(){var e=this.props,t=e.input,n=e.label,r=e.type,o=e.autoFocus;return f.createElement("div",{className:"login-form--field"},f.createElement("label",{className:"label",htmlFor:t.name},n),f.createElement("input",X({},t,{type:r,id:t.name,autoFocus:o})))},t}(f.Component),ne=function(e){var t=e.visible,n=e.children;return f.createElement("div",{className:"alert alert-info",role:"alert",style:{display:t?"block":"none"}},n)},re=function(){return(re=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},oe=Object(s.b)((function(e){return{message:e.auth.error}}),(function(e){return{onSubmit:function(t){return e(T(re({},t,{subdomain:"app"}))).toPromise().then((function(e){if(e.error)throw new Error(e.error)})).catch((function(){throw new p.a({_error:"Login failed"})}))}}}))(Y),ie=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},ae=function(){return f.createElement(V,{renderLink:function(){return f.createElement(ue,null)},render:function(){return f.createElement("div",null,"Go"," ",f.createElement(ce,null,f.createElement("a",{href:"https://app.forestry.io/password"},"here"))," ","to reset your password")}})},ce=w.default.span(l||(l=ie(["\n  color: ",";\n"],["\n  color: ",";\n"])),O.a.colors.primary),ue=function(){return f.createElement(K.a,{to:"/login",className:"forgot-password"},"OH, now I remember!")};n.d(t,"Login",(function(){return oe})),n.d(t,"ForgotPassword",(function(){return ae}))}}]);
//# sourceMappingURL=forestry-login.5621d92b10a53646d210.min.js.map